<!DOCTYPE html>
<html>
<head>
    <title>Patel Farm - Customer Milk ‡§π‡§ø‡§∏‡§æ‡§¨</title>
    <meta charset="UTF-8">
    <style>
        body {
            font-family: Arial;
            background: #f2f6f9;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #2c3e50;
        }

        .container {
            max-width: 900px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        input, button {
            padding: 8px;
            margin: 5px;
        }

        button {
            background: green;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background: darkgreen;
        }

        table {
            width: 100%;
            margin-top: 15px;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        th {
            background: #27ae60;
            color: white;
        }

        .summary {
            margin-top: 15px;
            font-weight: bold;
        }

        .customer-box {
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
        }
    </style>
</head>

<body>

<h1>üêÑ Patel Farm - Milk ‡§π‡§ø‡§∏‡§æ‡§¨ System ü•õ</h1>

<div class="container">

    <h3>Add New Customer</h3>
    <input type="text" id="customerName" placeholder="Customer Name">
    <button onclick="addCustomer()">Add Customer</button>

    <hr>

    <h3>Select Customer</h3>
    <select id="customerSelect" onchange="loadCustomer()">
        <option value="">-- Select Customer --</option>
    </select>

    <div id="customerDetails"></div>

</div>

<script>

let customers = JSON.parse(localStorage.getItem("milkCustomers")) || {};

function saveData() {
    localStorage.setItem("milkCustomers", JSON.stringify(customers));
}

function addCustomer() {
    let name = document.getElementById("customerName").value.trim();

    if(name === "") {
        alert("Enter customer name");
        return;
    }

    if(customers[name]) {
        alert("Customer already exists!");
        return;
    }

    customers[name] = [];
    saveData();
    updateCustomerList();
    document.getElementById("customerName").value = "";
}

function updateCustomerList() {
    let select = document.getElementById("customerSelect");
    select.innerHTML = '<option value="">-- Select Customer --</option>';

    for(let name in customers) {
        select.innerHTML += `<option value="${name}">${name}</option>`;
    }
}

function loadCustomer() {
    let name = document.getElementById("customerSelect").value;
    let detailsDiv = document.getElementById("customerDetails");

    if(name === "") {
        detailsDiv.innerHTML = "";
        return;
    }

    let entries = customers[name];

    let html = `
        <h3>${name} - Daily Milk Entry</h3>
        <input type="date" id="date">
        <input type="number" id="liters" placeholder="Liters">
        <input type="number" id="rate" placeholder="Rate per Liter">
        <button onclick="addEntry('${name}')">Add Entry</button>

        <table>
            <tr>
                <th>Date</th>
                <th>Liters</th>
                <th>Rate</th>
                <th>Total ‚Çπ</th>
            </tr>
    `;

    let totalLiters = 0;
    let totalAmount = 0;

    entries.forEach(e => {
        totalLiters += e.liters;
        totalAmount += e.total;

        html += `
            <tr>
                <td>${e.date}</td>
                <td>${e.liters}</td>
                <td>‚Çπ ${e.rate}</td>
                <td>‚Çπ ${e.total}</td>
            </tr>
        `;
    });

    html += `
        </table>
        <div class="summary">
            Total Liters: ${totalLiters} L <br>
            Total Amount: ‚Çπ ${totalAmount}
        </div>
    `;

    detailsDiv.innerHTML = html;
}

function addEntry(name) {
    let date = document.getElementById("date").value;
    let liters = parseFloat(document.getElementById("liters").value);
    let rate = parseFloat(document.getElementById("rate").value);

    if(date === "" || isNaN(liters) || isNaN(rate)) {
        alert("Fill all fields");
        return;
    }

    let total = liters * rate;

    customers[name].push({ date, liters, rate, total });

    saveData();
    loadCustomer();
}

updateCustomerList();

</script>

</body>
</html>
